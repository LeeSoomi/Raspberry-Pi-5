USB 직결 연결 방식이 가장 쉽고 안정적.
USB 케이블로 파이5 USB 포트에 꽂으면 시스템에서 /dev/ttyUSB0 같은 시리얼 장치로 잡히는 걸 확인

1. Python 직접 제어
LiDAR가 USB로 붙어 있으면 Python 라이브러리를 이용

sudo apt update
sudo apt install python3-pip
pip3 install rplidar


2. 간단한 코드로 스캔 데이터를 받아볼 수 있다.

from rplidar import RPLidar

PORT_NAME = '/dev/ttyUSB0'
lidar = RPLidar(PORT_NAME)

for scan in lidar.iter_scans():
    print(scan)


라즈베리파이에서 카메라와 라이다 동시 사용을 위한 방법
라인 따라가기는 바닥만 보고 주행하는 성격이라 장애물이 라인 위에 있거나 옆에서 끼어들면 카메라만으로는 늦게 반응하는 경우가 많다. 
그래서 라이다를 같이 쓰는 목적은 보통 “라인 추종은 계속하되, 위험하면 속도를 줄이거나 멈추고, 가능하면 살짝 회피한 뒤 다시 라인으로 복귀”

1. 카메라에서 조향값을 만든다
    카메라 프레임에서 라인을 이진화하고, ROI(바닥 하단 영역)에서 라인의 중심 x좌표를 찾고, 
    화면 중앙과의 오차를 PID 같은 제어로 조향값으로 바꿔. 결과는 steering_cmd 하나로 단순하게 유지해.


2. 라이다에서 안전 플래그와 속도 제한값을 만든다
    라이다 스캔에서 “전방 부채꼴 영역”만 잘라서 최소 거리(min_front)를 구한다. 
    그리고 조건을 단순하게 두면 튜닝이 쉬원진다. 
    예를 들면
    거리 < 0.25m 이면 즉시 정지
    0.25m ~ 0.6m 이면 감속(속도 제한)
    0.6m 이상이면 정상 속도
    이렇게만 해도 체감 성능이 확 좋아진다.

3. 최종 출력은 “게이트 방식”으로 합친다
    조향은 카메라가 만든 값을 기본으로 쓰고, 속도는 라이다가 만든 제한값을 우선 적용한다. 
    라이다가 위험이라고 판단하면 카메라 조향이 아무리 좋아도 속도는 0 또는 저속으로 강제로 떨어지는 방식으로 구현이 단순하고 실패가 적다.


